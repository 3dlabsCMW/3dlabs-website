<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Filament Wizard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
  <!-- Header / Brand bar -->
  <header class="top-bar">
    <div class="top-bar-left">
      <div class="logo-circle">3D</div>
      <div class="brand-text">
        <span class="brand-name">3DLabs</span>
        <span class="brand-subtitle">Filament Wizard</span>
      </div>
    </div>
    <div class="top-bar-right top-nav">
      <a class="nav-link" href="../index.html">Home</a>
      <a class="nav-link" href="../shop.html">Shop</a>
      <a class="nav-link" href="../gallery.html">Gallery</a>
      <a class="nav-link" href="../social.html">Social</a>
      <a class="nav-link" href="../contact.html">Contact</a>
      <a class="nav-link nav-cta nav-active" href="filament-wizard.html">Filament Wizard</a>
    </div>
  </header>

  <!-- MAIN APP (Wizard + Results) -->
  <div id="mainApp" class="app">
    <!-- LEFT PANEL -->
    <div class="card left">
      <h1>Filament Wizard</h1>
      <div class="subheading">
        Describe your part and constraints. The wizard will rank candidate filaments and show a basic print profile.
      </div>

      <div class="section-label">PART BASICS</div>
      <div class="grid">
        <div>
          <label for="partType">Type of part</label>
          <select id="partType">
            <option value="decorative">Cosmetic / decorative</option>
            <option value="mechanical">Mechanical / structural</option>
            <option value="flexible">Flexible / impact absorbing</option>
            <option value="lightweight">Lightweight / RC / drone</option>
            <option value="high_heat">High-heat environment</option>
            <option value="outdoor">Outdoor / UV exposed</option>
            <option value="chemical">Chemical contact</option>
            <option value="experimental">Experimental / special effect</option>
            <option value="support">Dissolvable support</option>
          </select>
          <div class="field-help">
            Choose the closest use case; the wizard will weight materials accordingly.
          </div>
        </div>

        <div>
          <label for="strength">Strength importance</label>
          <select id="strength">
            <option value="low">Not important</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
            <option value="max">Absolute maximum</option>
          </select>
        </div>

        <div>
          <label for="flexibility">Required flexibility</label>
          <select id="flexibility">
            <option value="rigid">Rigid</option>
            <option value="semi">Slight flex</option>
            <option value="flexible">Flexible / rubbery</option>
          </select>
        </div>

        <div>
          <label for="temp">Temperature exposure</label>
          <select id="temp">
            <option value="room">Room temp only</option>
            <option value="60">Up to ~60¬∞C</option>
            <option value="80">60‚Äì80¬∞C</option>
            <option value="100">80‚Äì100¬∞C</option>
            <option value="120">&gt; 100¬∞C</option>
          </select>
          <div class="field-help">
            For parts near motors or outdoors, use real-world temperatures when possible.
          </div>
        </div>
      </div>

      <div class="section-label">ENVIRONMENT & DIFFICULTY</div>
      <div class="grid">
        <div>
          <label for="environment">Environment</label>
          <select id="environment">
            <option value="indoor">Indoor, dry</option>
            <option value="outdoor">Outdoor / UV</option>
            <option value="humid">Humid / occasional water</option>
            <option value="chemical">Chemical exposure</option>
          </select>
        </div>

        <div>
          <label for="difficulty">Print difficulty tolerance</label>
          <select id="difficulty">
            <option value="any" selected>Best Match ‚Äì any difficulty</option>
            <option value="easy">Easy only (PLA / PETG)</option>
            <option value="medium">Medium (PETG / ASA)</option>
            <option value="hard">Hard (ABS / ASA / PC)</option>
            <option value="extreme">Industrial (PEEK / PEI)</option>
          </select>
          <div class="field-help">
            Higher difficulty unlocks stronger, more demanding materials.
          </div>
        </div>
      </div>

      <div class="section-label">SPECIAL & NOTES</div>
      <div class="grid">
        <div>
          <label for="special">Special requirement</label>
          <select id="special">
            <option value="">None</option>
            <option value="glow">Glow in the dark</option>
            <option value="wood">Wood look / feel</option>
            <option value="metal-look">Metallic appearance</option>
            <option value="metal-real">Metal-sinterable</option>
            <option value="conductive">Conductive / ESD</option>
            <option value="magnetic">Magnetic</option>
          </select>
        </div>
        <div>
          <label for="notes">Part description (optional)</label>
          <input type="text" id="notes" placeholder="e.g. RC arm near motor" />
        </div>
      </div>

      <div class="btn-row">
        <button class="btn-primary" id="runBtn">
          <span>‚öôÔ∏è</span>
          <span>Find filaments</span>
        </button>
        <button class="btn-secondary" id="resetBtn">
          <span>üßπ</span>
          <span>Reset</span>
        </button>
      </div>

      <div class="section-label">TOOLS</div>
      <div class="btn-row">
        <button class="btn-secondary" id="openCalculatorBtn">
          <span>üí∞</span>
          <span>Project cost calculator</span>
        </button>
      </div>
      <div class="btn-row">
        <button class="btn-secondary" id="openLibraryBtn">
          <span>üìö</span>
          <span>View all filaments</span>
        </button>
      </div>

      <div class="section-label">FEEDBACK</div>
      <div class="btn-row">
        <button class="btn-secondary" id="feedbackBtn">
          <span>üí¨</span>
          <span>Send feedback</span>
        </button>
      </div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="card right">
      <div class="results-header">
        <div class="results-header-left">
          <div class="results-header-title" id="resultsTitle">Recommendations</div>
          <div class="results-header-subtitle" id="subtitle">
            Up to 3 best-matching materials will appear here, with pros/cons and a quick print profile.
          </div>
          <div class="results-count" id="resultsCount"></div>
          <div class="results-header-tags" id="resultsQuickHints">
            <div class="chip chip-ghost">
              <span>üé®</span><span>Decorative ‚Üí PLA / PLA+</span>
            </div>
            <div class="chip chip-ghost">
              <span>üõ†Ô∏è</span><span>Mechanical ‚Üí PETG / ASA</span>
            </div>
            <div class="chip chip-ghost">
              <span>üå§Ô∏è</span><span>Outdoor ‚Üí ASA / PETG</span>
            </div>
            <div class="chip chip-ghost">
              <span>üî•</span><span>High heat ‚Üí ASA / PC / Nylon</span>
            </div>
          </div>
        </div>

        <div class="results-header-controls">
          <div class="chip-toggle-group">
            <div id="viewTop3" class="chip-toggle chip-active">Top 3</div>
            <div id="viewAll" class="chip-toggle">All Matches</div>
          </div>
          <div class="results-mode-line" id="resultsModeLine">
            Showing Top 3 ¬∑ Filters applied: 0
          </div>

          <div class="filters-row">
            <div class="sort-row">
              <span>Sort By:</span>
              <select id="sortBy">
                <option value="score">Best Match</option>
                <option value="price_asc">Price: Low ‚Üí High</option>
                <option value="price_desc">Price: High ‚Üí Low</option>
                <option value="tox_asc">Toxicity: Low ‚Üí High</option>
                <option value="tox_desc">Toxicity: High ‚Üí Low</option>
              </select>
            </div>
            <button class="btn-filters" id="filtersBtn">
              <span>üß™</span><span id="filtersBtnLabel">Filters</span>
            </button>
          </div>

          <!-- FILTER DROPDOWN -->
          <div class="filters-dropdown" id="filtersDropdown">
            <div class="filter-section-title">Filters</div>
            <label class="filter-row">
              <input type="checkbox" id="filterHideHard" />
              <span>Hide hard / extreme materials</span>
            </label>

            <div class="filter-section-title" style="margin-top:6px;">Printer type</div>
            <label class="radio-row">
              <input type="radio" name="printerFilter" value="any" checked />
              <span>Any printer</span>
            </label>
            <label class="radio-row">
              <input type="radio" name="printerFilter" value="open_only" />
              <span>Open-frame friendly only</span>
            </label>
            <label class="radio-row">
              <input type="radio" name="printerFilter" value="enclosed_only" />
              <span>Enclosed printers only</span>
            </label>

            <div class="filters-footer">
              <button class="btn-secondary btn-small" id="clearFiltersBtn">Reset filters</button>
            </div>
          </div>
        </div>
      </div>

      <div class="results-scroll" id="results">
        <div class="result-empty">
          No results yet.<br/><br/>
          Tell the wizard about your part and click <b>Find filaments</b> to see recommendations.
        </div>
      </div>
    </div>
  </div>

  <!-- CALCULATOR SCREEN -->
  <div id="calculatorScreen" class="hidden">
    <div class="calculator-wrapper">
      <div class="card calculator-card">
        <div class="calc-header-row">
          <div>
            <div class="results-header-title">Project cost calculator</div>
            <div class="results-header-subtitle">
              Estimate filament, energy, labour and other costs, then apply markup.
            </div>
          </div>
          <button class="btn-secondary btn-small" id="calculatorBackBtn">
            ‚Üê Back to Filament Wizard
          </button>
        </div>

        <div class="calc-input-grid">
          <div>
            <label for="calcFilamentGrams">Filament used (g)</label>
            <input type="number" id="calcFilamentGrams" min="0" placeholder="e.g. 120" />
          </div>
          <div>
            <label for="calcSpoolGrams">Grams per spool (g)</label>
            <input type="number" id="calcSpoolGrams" min="1" placeholder="e.g. 1000" />
          </div>
          <div>
            <label for="calcSpoolCost">Spool cost ($)</label>
            <input type="number" id="calcSpoolCost" min="0" step="0.01" placeholder="e.g. 25.00" />
          </div>

          <div>
            <label for="calcPowerCostPerHour">Power cost per hour ($) <span style="color:var(--muted)">(optional)</span></label>
            <input type="number" id="calcPowerCostPerHour" min="0" step="0.01" placeholder="e.g. 0.20" />
          </div>

          <div>
            <label>Print time</label>
            <div style="display:flex; gap:6px;">
              <input type="number" id="calcPrintHours" min="0" placeholder="h" style="width:50%;" />
              <input type="number" id="calcPrintMinutes" min="0" max="59" placeholder="min" style="width:50%;" />
            </div>
          </div>

          <div>
            <label>Labour rate &amp; time</label>
            <div style="display:flex; flex-direction:column; gap:4px;">
              <input type="number" id="calcLaborRate" min="0" step="0.01" placeholder="Rate $/hour" />
              <div style="display:flex; gap:6px;">
                <input type="number" id="calcLaborHours" min="0" placeholder="h" style="width:50%;" />
                <input type="number" id="calcLaborMinutes" min="0" max="59" placeholder="min" style="width:50%;" />
              </div>
            </div>
          </div>

          <div class="calc-row-full">
            <label for="calcOtherCosts">Other fixed costs ($) <span style="color:var(--muted)">(optional)</span></label>
            <input type="number" id="calcOtherCosts" min="0" step="0.01" placeholder="e.g. packaging, consumables" />
          </div>
        </div>

        <div class="markup-row">
          <div class="markup-label-row">
            <span>Markup</span>
            <span class="markup-value" id="markupValueLabel">0%</span>
          </div>
          <input type="range" id="markupSlider" min="0" max="420" value="0" />
        </div>

        <div class="calc-summary" id="calcSummary">
          Enter values above and hit <b>Calculate</b>.
        </div>

        <div class="calc-btn-row">
          <button class="btn-primary" id="calcRunBtn">
            <span>üßÆ</span><span>Calculate</span>
          </button>
          <button class="btn-secondary" id="calcResetBtn">
            <span>üßπ</span><span>Reset</span>
          </button>
        </div>

        <div class="btn-row" style="margin-top:16px;">
          <button class="btn-secondary" id="calcOpenLibraryBtn">
            <span>üìö</span><span>View all filaments</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <span>‚úî</span><span id="toastText">Profile copied</span>
  </div>

  <!-- Global warning footer -->
  <div class="global-warning">
    <span class="version">3DLabs Filament Wizard ¬∑ v0.9 ¬∑ Last DB update: Dec 2025</span>
    ‚ö†Ô∏è Filament properties, temperatures, toxicity and pricing here are approximate and for hobby use only.
    Always refer to your filament manufacturer's datasheet and follow local safety guidelines for fumes,
    ventilation, food contact and high-temperature applications.
  </div>

  <!-- Filament database -->
  <script src="filaments.js"></script>

  <!-- Wizard + Filters + Calculator logic -->
  <script src="logic.js"></script>
  <script src="wiring.js"></script>
</body>
</html>
